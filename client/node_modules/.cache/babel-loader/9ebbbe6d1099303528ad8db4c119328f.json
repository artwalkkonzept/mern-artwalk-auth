{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Desktop/mern-artwalk-auth-aws-google/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/admin/Desktop/mern-artwalk-auth-aws-google/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/admin/Desktop/mern-artwalk-auth-aws-google/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{useParams}from'react-router-dom';import axios from'axios';import{useToken}from'../auth/useToken';import{EmailVerificationSuccess}from'./EmailVerificationSuccess';import{EmailVerificationFail}from'./EmailVerificationFail';import{jsx as _jsx}from\"react/jsx-runtime\";export var EmailVerificationLandingPage=function EmailVerificationLandingPage(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSuccess=_useState4[0],setIsSuccess=_useState4[1];var _useParams=useParams(),verificationString=_useParams.verificationString;var _useToken=useToken(),_useToken2=_slicedToArray(_useToken,2),setToken=_useToken2[1];useEffect(function(){var loadVerification=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.put('/api/verify-email',{verificationString:verificationString});case 3:response=_context.sent;token=response.data.token;setToken(token);setIsSuccess(true);setIsLoading(false);_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);setIsSuccess(false);setIsLoading(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function loadVerification(){return _ref.apply(this,arguments);};}();loadVerification();},[setToken,verificationString]);if(isLoading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(!isSuccess)return/*#__PURE__*/_jsx(EmailVerificationFail,{});return/*#__PURE__*/_jsx(EmailVerificationSuccess,{});};","map":{"version":3,"sources":["/Users/admin/Desktop/mern-artwalk-auth-aws-google/client/src/pages/EmailVerificationLandingPage.js"],"names":["useState","useEffect","useParams","axios","useToken","EmailVerificationSuccess","EmailVerificationFail","EmailVerificationLandingPage","isLoading","setIsLoading","isSuccess","setIsSuccess","verificationString","setToken","loadVerification","put","response","token","data"],"mappings":"8ZAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,wBAAT,KAAyC,4BAAzC,CACA,OAASC,qBAAT,KAAsC,yBAAtC,C,2CAEA,MAAO,IAAMC,CAAAA,4BAA4B,CAAG,QAA/BA,CAAAA,4BAA+B,EAAM,eACZP,QAAQ,CAAC,IAAD,CADI,wCACvCQ,SADuC,eAC5BC,YAD4B,8BAEZT,QAAQ,CAAC,KAAD,CAFI,yCAEvCU,SAFuC,eAE5BC,YAF4B,8BAGfT,SAAS,EAHM,CAGtCU,kBAHsC,YAGtCA,kBAHsC,eAI1BR,QAAQ,EAJkB,wCAItCS,QAJsC,eAM9CZ,SAAS,CAAC,UAAM,CACZ,GAAMa,CAAAA,gBAAgB,0FAAG,4LAEMX,CAAAA,KAAK,CAACY,GAAN,CAAU,mBAAV,CAA+B,CAAEH,kBAAkB,CAAlBA,kBAAF,CAA/B,CAFN,QAEXI,QAFW,eAGTC,KAHS,CAGCD,QAAQ,CAACE,IAHV,CAGTD,KAHS,CAIjBJ,QAAQ,CAACI,KAAD,CAAR,CACAN,YAAY,CAAC,IAAD,CAAZ,CACAF,YAAY,CAAC,KAAD,CAAZ,CANiB,iFAQjBE,YAAY,CAAC,KAAD,CAAZ,CACAF,YAAY,CAAC,KAAD,CAAZ,CATiB,qEAAH,kBAAhBK,CAAAA,gBAAgB,0CAAtB,CAaAA,gBAAgB,GACnB,CAfQ,CAeN,CAACD,QAAD,CAAWD,kBAAX,CAfM,CAAT,CAiBA,GAAIJ,SAAJ,CAAe,mBAAO,iCAAP,CACf,GAAI,CAACE,SAAL,CAAgB,mBAAO,KAAC,qBAAD,IAAP,CAChB,mBAAO,KAAC,wBAAD,IAAP,CACH,CA1BM","sourcesContent":["import { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { useToken } from '../auth/useToken';\nimport { EmailVerificationSuccess } from './EmailVerificationSuccess';\nimport { EmailVerificationFail } from './EmailVerificationFail';\n\nexport const EmailVerificationLandingPage = () => {\n    const [isLoading, setIsLoading] = useState(true);\n    const [isSuccess, setIsSuccess] = useState(false);\n    const { verificationString } = useParams();\n    const [,setToken] = useToken();\n\n    useEffect(() => {\n        const loadVerification = async () => {\n            try {\n                const response = await axios.put('/api/verify-email', { verificationString });\n                const { token } = response.data;\n                setToken(token);\n                setIsSuccess(true);\n                setIsLoading(false);\n            } catch (e) { \n                setIsSuccess(false);\n                setIsLoading(false);\n            }\n        }\n\n        loadVerification();\n    }, [setToken, verificationString]);\n\n    if (isLoading) return <p>Loading...</p>;\n    if (!isSuccess) return <EmailVerificationFail />\n    return <EmailVerificationSuccess />\n}"]},"metadata":{},"sourceType":"module"}