{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Desktop/artwalkkonzept-auth-aws/artwalkkonzept-auth-aws-google_13.10.21/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/admin/Desktop/artwalkkonzept-auth-aws/artwalkkonzept-auth-aws-google_13.10.21/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/admin/Desktop/artwalkkonzept-auth-aws/artwalkkonzept-auth-aws-google_13.10.21/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import axios from'axios';import{EmailVerificationSuccess}from'./EmailVerificationSuccess';import{EmailVerificationFail}from'./EmailVerificationFail';import{useToken}from'../auth/useToken';import{useQueryParams}from'../util/useQueryParams';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var EmailVerificationCodePage=function EmailVerificationCodePage(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSuccess=_useState2[0],setIsSuccess=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFailure=_useState4[0],setIsFailure=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),verificationString=_useState6[0],setVerificationString=_useState6[1];var _useQueryParams=useQueryParams(),email=_useQueryParams.email;var _useToken=useToken(),_useToken2=_slicedToArray(_useToken,2),setToken=_useToken2[1];var onSubmitVerificationString=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.put('/api/verify-email',{email:email,verificationString:verificationString});case 3:response=_context.sent;token=response.data.token;setToken(token);setIsSuccess(true);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setIsFailure(true);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function onSubmitVerificationString(){return _ref.apply(this,arguments);};}();if(isSuccess)return/*#__PURE__*/_jsx(EmailVerificationSuccess,{});if(isFailure)return/*#__PURE__*/_jsx(EmailVerificationFail,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"content-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Please Verify Your Email\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You should have received a verification code at the email address you provided. Please enter it here:\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"e.g. 123456\",value:verificationString,onChange:function onChange(e){return setVerificationString(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:onSubmitVerificationString,children:\"Submit\"})]});};","map":{"version":3,"sources":["/Users/admin/Desktop/artwalkkonzept-auth-aws/artwalkkonzept-auth-aws-google_13.10.21/client/src/pages/EmailVerificationCodePage.js"],"names":["useState","axios","EmailVerificationSuccess","EmailVerificationFail","useToken","useQueryParams","EmailVerificationCodePage","isSuccess","setIsSuccess","isFailure","setIsFailure","verificationString","setVerificationString","email","setToken","onSubmitVerificationString","put","response","token","data","e","target","value"],"mappings":"ugBAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,wBAAT,KAAyC,4BAAzC,CACA,OAASC,qBAAT,KAAsC,yBAAtC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,cAAT,KAA+B,wBAA/B,C,wFAEA,MAAO,IAAMC,CAAAA,yBAAyB,CAAG,QAA5BA,CAAAA,yBAA4B,EAAM,eACTN,QAAQ,CAAC,KAAD,CADC,wCACpCO,SADoC,eACzBC,YADyB,8BAETR,QAAQ,CAAC,KAAD,CAFC,yCAEpCS,SAFoC,eAEzBC,YAFyB,8BAISV,QAAQ,CAAC,EAAD,CAJjB,yCAIpCW,kBAJoC,eAIhBC,qBAJgB,mCAKzBP,cAAc,EALW,CAKnCQ,KALmC,iBAKnCA,KALmC,eAMtBT,QAAQ,EANc,wCAMlCU,QANkC,eAQ3C,GAAMC,CAAAA,0BAA0B,0FAAG,4LAEJd,CAAAA,KAAK,CAACe,GAAN,CAAU,mBAAV,CAA+B,CAAEH,KAAK,CAALA,KAAF,CAASF,kBAAkB,CAAlBA,kBAAT,CAA/B,CAFI,QAErBM,QAFqB,eAGnBC,KAHmB,CAGTD,QAAQ,CAACE,IAHA,CAGnBD,KAHmB,CAI3BJ,QAAQ,CAACI,KAAD,CAAR,CACAV,YAAY,CAAC,IAAD,CAAZ,CAL2B,+EAO3BE,YAAY,CAAC,IAAD,CAAZ,CAP2B,oEAAH,kBAA1BK,CAAAA,0BAA0B,0CAAhC,CAWA,GAAIR,SAAJ,CAAe,mBAAO,KAAC,wBAAD,IAAP,CACf,GAAIE,SAAJ,CAAe,mBAAO,KAAC,qBAAD,IAAP,CAEf,mBACI,aAAK,SAAS,CAAC,mBAAf,wBACI,gDADJ,cAEI,4HAFJ,cAGI,cACI,WAAW,CAAC,aADhB,CAEI,KAAK,CAAEE,kBAFX,CAGI,QAAQ,CAAE,kBAAAS,CAAC,QAAIR,CAAAA,qBAAqB,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAV,CAAzB,EAHf,EAHJ,cAOI,eAAQ,OAAO,CAAEP,0BAAjB,oBAPJ,GADJ,CAWH,CAjCM","sourcesContent":["import { useState } from 'react';\nimport axios from 'axios';\nimport { EmailVerificationSuccess } from './EmailVerificationSuccess';\nimport { EmailVerificationFail } from './EmailVerificationFail';\nimport { useToken } from '../auth/useToken';\nimport { useQueryParams } from '../util/useQueryParams';\n\nexport const EmailVerificationCodePage = () => {\n    const [isSuccess, setIsSuccess] = useState(false);\n    const [isFailure, setIsFailure] = useState(false);\n\n    const [verificationString, setVerificationString] = useState('');\n    const { email } = useQueryParams();\n    const [, setToken] = useToken();\n\n    const onSubmitVerificationString = async () => {\n        try {\n            const response = await axios.put('/api/verify-email', { email, verificationString });\n            const { token } = response.data;\n            setToken(token);\n            setIsSuccess(true);\n        } catch (e) {\n            setIsFailure(true);\n        }\n    }\n\n    if (isSuccess) return <EmailVerificationSuccess />;\n    if (isFailure) return <EmailVerificationFail />;\n\n    return (\n        <div className=\"content-container\">\n            <h3>Please Verify Your Email</h3>\n            <p>You should have received a verification code at the email address you provided. Please enter it here:</p>\n            <input\n                placeholder=\"e.g. 123456\"\n                value={verificationString}\n                onChange={e => setVerificationString(e.target.value)} />\n            <button onClick={onSubmitVerificationString}>Submit</button>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}