{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Desktop/mern-artwalk-auth-aws-google/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/admin/Desktop/mern-artwalk-auth-aws-google/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/admin/Desktop/mern-artwalk-auth-aws-google/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import axios from'axios';import{useToken}from'../auth/useToken';import{useQueryParams}from'../util/useQueryParams';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LogInPage=function LogInPage(){var _useToken=useToken(),_useToken2=_slicedToArray(_useToken,2),setToken=_useToken2[1];//const [errorMessage, setErrorMessage] = useState('');    \nvar _useState=useState(''),_useState2=_slicedToArray(_useState,1),errorMessage=_useState2[0];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),emailValue=_useState4[0],setEmailValue=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),passwordValue=_useState6[0],setPasswordValue=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),googleOauthUrl=_useState8[0],setGoogleOauthUrl=_useState8[1];var _useQueryParams=useQueryParams(),oauthToken=_useQueryParams.token;var history=useHistory();useEffect(function(){if(oauthToken){setToken(oauthToken);history.push('/');}},[oauthToken,setToken,history]);useEffect(function(){var loadOauthUrl=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/auth/google/url');case 3:response=_context.sent;url=response.data.url;setGoogleOauthUrl(url);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function loadOauthUrl(){return _ref.apply(this,arguments);};}();loadOauthUrl();},[]);var onLogInClicked=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,token;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/api/login',{email:emailValue,password:passwordValue});case 2:response=_context2.sent;token=response.data.token;setToken(token);history.push('/');case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function onLogInClicked(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"content-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Log In\"}),/*#__PURE__*/_jsxs(\"div\",{children:[errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"fail\",children:errorMessage}),/*#__PURE__*/_jsx(\"input\",{value:emailValue,onChange:function onChange(e){return setEmailValue(e.target.value);},placeholder:\"example@gmail.com\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:passwordValue,onChange:function onChange(e){return setPasswordValue(e.target.value);},placeholder:\"password\"}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{disabled:!emailValue||!passwordValue,onClick:onLogInClicked,children:\"Log In\"})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return history.push('/signup');},children:\"Don't have an account? Sign Up\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{disabled:!googleOauthUrl,onClick:function onClick(){window.location.href=googleOauthUrl;},children:\"Log in with Google\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return history.push('/forgot-password');},children:\"Forgot your password?\"})})]})]});};","map":{"version":3,"sources":["/Users/admin/Desktop/mern-artwalk-auth-aws-google/client/src/pages/LogInPage.js"],"names":["useState","useEffect","useHistory","axios","useToken","useQueryParams","LogInPage","setToken","errorMessage","emailValue","setEmailValue","passwordValue","setPasswordValue","googleOauthUrl","setGoogleOauthUrl","oauthToken","token","history","push","loadOauthUrl","get","response","url","data","console","log","onLogInClicked","post","email","password","e","target","value","window","location","href"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { useToken } from '../auth/useToken';\nimport { useQueryParams } from '../util/useQueryParams';\n\nexport const LogInPage = () => {\n    const [, setToken] = useToken();\n\n    //const [errorMessage, setErrorMessage] = useState('');    \n    const [errorMessage] = useState('');\n\n\n    const [emailValue, setEmailValue] = useState('');\n    const [passwordValue, setPasswordValue] = useState('');\n\n    const [googleOauthUrl, setGoogleOauthUrl] = useState('');\n    const { token: oauthToken } = useQueryParams();\n\n    const history = useHistory();\n\n    useEffect(() => {\n        if (oauthToken) {\n            setToken(oauthToken);\n            history.push('/');\n        }\n    }, [oauthToken, setToken, history]);\n\n    useEffect(() => {\n        const loadOauthUrl = async () => {\n            try {\n                const response = await axios.get('/auth/google/url');\n                const { url } = response.data;\n                setGoogleOauthUrl(url);\n            } catch (e) {\n                console.log(e);\n            }\n        }\n\n        loadOauthUrl();\n    }, []);\n\n    const onLogInClicked = async () => {\n        const response = await axios.post('/api/login', {\n            email: emailValue,\n            password: passwordValue,\n        });\n        const { token } = response.data;\n        setToken(token);\n        history.push('/');\n    }\n\n    return (\n        \n        <div className=\"content-container\">\n            <h3>Log In</h3>\n            <div>\n            {errorMessage && <div className=\"fail\">{errorMessage}</div>}\n            <input\n                value={emailValue}\n                onChange={e => setEmailValue(e.target.value)}\n                placeholder=\"example@gmail.com\" />\n            <input\n                type=\"password\"\n                value={passwordValue}\n                onChange={e => setPasswordValue(e.target.value)}\n                placeholder=\"password\" />\n            <li><button\n                disabled={!emailValue || !passwordValue}\n                onClick={onLogInClicked}>Log In</button></li>\n            <hr />\n            <li><button onClick={() => history.push('/signup')}>Don't have an account? Sign Up</button></li>\n            <li><button\n                disabled={!googleOauthUrl}\n                onClick={() => { window.location.href = googleOauthUrl }}\n            >Log in with Google</button></li>\n            <li><button onClick={() => history.push('/forgot-password')}>Forgot your password?</button></li>\n            </div>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}